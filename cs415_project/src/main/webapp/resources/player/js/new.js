(function(d){var b=function(){};b.test=document.createElement("div");b.isEmpty=function(b){return 0==b.replace(/^\s+|\s+$/g,"").length};b.strip=function(b){return b.replace(/^\s+|\s+$/g,"")};b.isNumber=function(b){return!isNaN(parseFloat(b))&&isFinite(b)};b.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};b.isIE=function(){return-1!=b.getInternetExplorerVersion()?!0:!1};b.isChrome=function(){return!!d.chrome&&!!d.chrome.webstore};b.getInternetExplorerVersion=
function(){var b=-1;if("Microsoft Internet Explorer"==navigator.appName){var d=navigator.userAgent,C=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=C.exec(d)&&(b=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(d=navigator.userAgent,C=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=C.exec(d)&&(b=parseFloat(RegExp.$1)));return b};b.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};b.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};b.hasHistory=function(){return!(!d.history||
!history.pushState)};b.hasDownloadSupport=function(){return"download"in document.createElement("a")};b.volumeCanBeSet=function(){var b=document.createElement("audio");if(!b)return!1;b.volume=0;return 0==b.volume?!0:!1};b.supportsWebGL=function(){try{return!!d.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(r){return!1}};b.canPlayMp4=function(){var b=document.createElement("video");return!(!b.canPlayType||!b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,
""))};b.canPlayMp3=function(){var b=document.createElement("audio");return!(!b.canPlayType||!b.canPlayType("audio/mpeg;").replace(/no/,""))};b.canPlayWav=function(){var b=document.createElement("audio");return!(!b.canPlayType||!b.canPlayType("audio/wav;").replace(/no/,""))};b.relativePath=function(b){return/^(?:[a-z]+:)?\/\//i.test(b)};b.qualifyURL=function(b){var d=document.createElement("a");d.href=b;return d.href};b.hasFullscreen=function(){return b.test.requestFullscreen||b.test.mozRequestFullScreen||
b.test.msRequestFullscreen||b.test.oRequestFullscreen||b.test.webkitRequestFullScreen};b.selectText=function(b){var r=document;if(r.body.createTextRange)r=r.body.createTextRange(),r.moveToElementText(b),r.select();else if(d.getSelection){var C=d.getSelection();r=r.createRange();r.selectNodeContents(b);C.removeAllRanges();C.addRange(r)}};b.randomiseArray=function(b){var d=[],r=[],w;for(w=0;w<b;w++)d[w]=w;for(w=0;w<b;w++){var c=Math.round(Math.random()*(d.length-1));r[w]=d[c];d.splice(c,1)}return r};
b.sortArray=function(b,d){var r,w=b.length,c=[];for(r=0;r<w;r++)c[r]=b[d[r]];return c};b.keysrt=function(b,d,C){var r=1;C&&(r=-1);return b.sort(function(b,m){var c=b[d],k=m[d];return r*(c<k?-1:c>k?1:0)})};b.formatCurrentTime=function(b){b=Math.round(b);var d=Math.floor(b/60);b=Math.floor(b%60);return(10<=d?d:""+d)+":"+(10<=b?b:"0"+b)};b.formatDuration=function(b){b=Math.round(b);var d=Math.floor(b/60);b=Math.floor(b%60);return(10<=d?d:""+d)+":"+(10<=b?b:"0"+b)};b.toSeconds=function(b){b=b.split(/[\.:,]+/);
return Number(3600*+b[0]+60*+b[1]+ +b[2])};d.MVPUtils=b})(window);
(function(d,b){d.MVPYoutubeLoader=function(d){function r(d){b.ajax({url:d,dataType:"jsonp"}).done(function(d){d.error&&d.error.message&&console.log(d.error.message);var k,D=d.items.length,E;ya=d.nextPageToken;for(k=0;k<D&&v.length!=S;k++)(E=d.items[k])&&("youtube_playlist"==c||"youtube_single"==c||"youtube_single_list"==c?"private"!=E.status.privacyStatus&&(E.snippet.title?"Deleted video"!=E.snippet.title:1)&&v.push(C(E,c)):("youtube_video_query"==c||"youtube_channel"==c)&&v.push(C(E,c)));if("youtube_single"==
c||"youtube_single_list"==c)b(w).trigger("MVPYoutubeLoader.END_LOAD",[v]);else if(v.length<S)if(d.nextPageToken){v.length+x>S&&(x=S-v.length);if("youtube_playlist"==c)var U="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+d.nextPageToken+"&part=snippet,status,contentDetails&maxResults="+x+"&playlistId="+m.path+"&key="+ra;else"youtube_video_query"==c?U="https://www.googleapis.com/youtube/v3/search?pageToken="+d.nextPageToken+"&part=id,snippet&maxResults="+x+"&order="+Bb+"&q="+m.path+
"&key="+ra:"youtube_channel"==c&&(U="https://www.googleapis.com/youtube/v3/search?pageToken="+d.nextPageToken+"&part=id,snippet&maxResults="+x+"&order=date&channelId="+m.path+"&key="+ra);r(U)}else b(w).trigger("MVPYoutubeLoader.END_LOAD",[v]);else b(w).trigger("MVPYoutubeLoader.END_LOAD",[v])}).fail(function(d,c,k){console.log(d,c,k);b(w).trigger("MVPYoutubeLoader.END_LOAD",[v])})}function C(b,d){var c=jQuery.extend(!0,{},m);c.type="youtube";c.deeplink&&"youtube_single"!=c.origtype&&(c.deeplink+=
E.toString(),E++);if("youtube_single"==d||"youtube_single_list"==d)c.id=b.id;else if("youtube_playlist"==d)c.id=b.contentDetails.videoId;else if("youtube_video_query"==d||"youtube_channel"==d)c.id=b.id.videoId;if(b.snippet&&b.snippet.publishedAt){var S=new Date(b.snippet.publishedAt);c.publishedAt=S.getMonth()+1+"/"+S.getDate()+"/"+S.getFullYear()}!c.title&&b.snippet.title&&(c.title=b.snippet.title);!c.description&&b.snippet.description&&(c.description=b.snippet.description);!c.thumb&&b.snippet.thumbnails&&
(b.snippet.thumbnails.medium?c.thumb=b.snippet.thumbnails.medium.url:b.snippet.thumbnails["default"]?c.thumb=b.snippet.thumbnails["default"].url:b.snippet.thumbnails.standard&&(c.thumb=b.snippet.thumbnails.standard.url));c.share||(c.share="https://www.youtube.com/watch?v="+c.id);U&&k.push(c.id);return c}var w=this,c,m,v=[],k=[],U=d.getStatistics,E,x=50,D,ya,S,Bb,ra=d.youtubeAppId;this.resumeLoad=function(){v=[];k=[];ya?r(D+"&pageToken="+ya):b(w).trigger("MVPYoutubeLoader.END_LOAD",[v])};this.setData=
function(b){if(!ra||MVPUtils.isEmpty(ra))alert("Youtube API key missing! Set API key in settings.");else{v=[];k=[];m=b;E=0;S=m.limit||500;S<x&&(x=S);Bb=m.order||"relevance";c=m.type;ya=null;if("youtube_single"==c||"youtube_single_list"==c)D="https://www.googleapis.com/youtube/v3/videos?id="+m.path+"&key="+ra+"&part=snippet,contentDetails,status,statistics";else if("youtube_playlist"==c)D="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults="+x+"&playlistId="+
m.path+"&key="+ra;else if("youtube_video_query"==c)D="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults="+x+"&order="+Bb+"&q="+m.path+"&key="+ra;else if("youtube_channel"==c)D="https://www.googleapis.com/youtube/v3/search?part=id,snippet&order=date&maxResults="+x+"&order=date&channelId="+m.path+"&key="+ra;else{console.log("Wrong youtube type!");return}r(D)}}}})(window,jQuery);
(function(d,b){d.MVPVimeoLoader=function(r){function Na(){b.ajax({type:"GET",url:m+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:U},dataType:"json"}).done(function(d){if(!d.body)return console.log("Vimeo response null!"),b(c).trigger("MVPVimeoLoader.END_LOAD",[x]),!1;C(d)}).fail(function(d,k,m){console.log(d,k,m);b(c).trigger("MVPVimeoLoader.END_LOAD",[x])})}function C(d){U=d.body.paging&&d.body.paging.next?d.body.paging.next:null;var m;var r=d.body.data?d.body.data.length:1;for(m=0;m<
r&&x.length!=v;m++){var E=d.body.uri?d.body:d.body.data[m];x.push(w(E))}x.length<v?U?(x.length+k>v&&(k=v-x.length,d=U.split("per_page=")[1].split("&")[0],U=U.replace("per_page="+d,"per_page="+k)),Na()):b(c).trigger("MVPVimeoLoader.END_LOAD",[x]):b(c).trigger("MVPVimeoLoader.END_LOAD",[x])}function w(d){var c=b.extend(!0,{},E);c.deeplink&&"vimeo_single"!=c.origtype&&(c.deeplink+=(D+1).toString(),D++);c.type="vimeo";c.id=d.uri.substr(d.uri.lastIndexOf("/")+1);d.duration&&(c.duration=d.duration);!c.title&&
d.name&&(c.title=d.name);!c.description&&d.description&&(c.description=d.description);if(!c.thumb&&d.pictures&&d.pictures.sizes){var k,m=d.pictures.sizes.length;for(k=0;k<m;k++)if(295==d.pictures.sizes[k].width){c.thumb=d.pictures.sizes[k].link;break}else if(640==d.pictures.sizes[k].width){c.thumb=d.pictures.sizes[k].link;break}}c.share||(c.share="https://vimeo.com/"+c.id);return c}var c=this,m=r.sourcePath,v,k=100,U,E=[],x=[],D;this.resumeLoad=function(){x=[];U?Na():b(c).trigger("MVPVimeoLoader.END_LOAD",
[x])};this.setData=function(w){if("file:"==d.location.protocol)console.log("Using Vimeo locally is not possible! This requires online server connection!"),b(c).trigger("MVPVimeoLoader.END_LOAD",[x]);else{x=[];E=w;v=E.limit||500;v<k&&(k=v);D=0;U=null;var S=m+"includes/vimeo/vimeo_data.php";w={type:E.type,path:E.path,user:E.user,sort:E.sort,sortDirection:E.sortDirection,page:1,perPage:v<k?v:k};b.ajax({type:"GET",url:S,data:w,dataType:"json"}).done(function(d){if(!d.body)return console.log("Vimeo response null!"),
b(c).trigger("MVPVimeoLoader.END_LOAD",[x]),!1;C(d)}).fail(function(d,k,m){console.log(d,k,m);b(c).trigger("MVPVimeoLoader.END_LOAD",[x])})}}}})(window,jQuery);
(function(d,b){d.MVPPlaylistManager=function(d){function r(){D=MVPUtils.randomiseArray(m)}var C=this,w=d.loopingOn,c=d.randomPlay,m,v=!1,k=-1,U,E,x=!1,D=[],ya=!1;setTimeout(function(){clearTimeout(this);b(C).trigger("MVPPlaylistManager.RANDOM_CHANGE",c);b(C).trigger("MVPPlaylistManager.LOOP_CHANGE",w)},50);this.setCounter=function(d,x){"undefined"===typeof x&&(x=!0);k=x?k+parseInt(d,10):parseInt(d,10);if(isNaN(k))alert("MVPPlaylistManager message: No active media, counter = "+k);else if(v=!1,w){if(c)if(k>
m-1){k=D[m-1];r();if(D[0]==k){var S=D.splice(0,1);D.push(S)}k=0}else 0>k&&(k=D[0],r(),D[m-1]==k&&(S=D.splice(m-1,1),D.unshift(S)),k=m-1);else k>m-1?k=0:0>k&&(k=m-1);b(C).trigger("MVPPlaylistManager.COUNTER_READY",k)}else k>m-1?(k=m-1,v=!0):0>k&&(k=0),v?b(C).trigger("MVPPlaylistManager.PLAYLIST_END"):b(C).trigger("MVPPlaylistManager.COUNTER_READY",k)};this.getCounter=function(){return c?ya?k:D[k]:k};this.advanceHandler=function(d){ya=!1;x?(x=!1,E+d>m-1?(k=m-1,b(C).trigger("MVPPlaylistManager.COUNTER_READY",
k)):0>E+d?(k=0,b(C).trigger("MVPPlaylistManager.COUNTER_READY",k)):C.setCounter(E+d,!1)):C.setCounter(d)};this.processPlaylistRequest=function(d){ya=!1;c&&(ya=!0,U=d,x||(E=k,x=!0));C.setCounter(d,!1)};this.setPlaylistItems=function(d,b){"undefined"===typeof b&&(b=!0);b&&(k=-1);m=d;c&&r()};this.reSetCounter=function(d){"undefined"===typeof d?k=-1:(d=parseInt(d,10),m?(d>m-1?d=m-1:0>d&&(d=0),k=d):k=-1)};this.setRandom=function(d){(c="undefined"!==typeof d?d:!c)&&r();if(c){var m=D.length;for(d=0;d<m;d++)if(D[d]==
k){if(0==d)break;d=D.splice(d,1);D.unshift(parseInt(d,10));break}k=0}else x?(k=U,x=!1):k=D[k];b(C).trigger("MVPPlaylistManager.RANDOM_CHANGE",c)};this.getRandom=function(d){return c};this.setLooping=function(d){w="undefined"!==typeof d?d:!w;b(C).trigger("MVPPlaylistManager.LOOP_CHANGE",w)};this.getLooping=function(d){return w};this.getPosition=function(d){return D.indexOf(d)}}})(window,jQuery);
(function(d,b){function r(d,b,m,v){var c={},w=m.width();m=m.height();v=Na(b,v);b=v.width;v=v.height;var r=(w-0)/(m-0),x=b/v;x<r?d?(c.width=(m-0)/v*b,c.height=m-0):(c.height=(w-0)/b*v,c.width=w-0):x>r?d?(c.height=(w-0)/b*v,c.width=w-0):(c.width=(m-0)/v*b,c.height=m-0):(c.width=w-0,c.height=m-0);return c}function Na(d,b){var c={};"video"==d?b.videoWidth&&b.videoHeight?(c.width=b.videoWidth,c.height=b.videoHeight):b[0]&&b[0].videoWidth&&b[0].videoHeight?(c.width=b[0].videoWidth,c.height=b[0].videoHeight):
(c.width=16,c.height=9):"youtube"==d||"vimeo"==d?b.sw&&b.sh?(c.width=b.sw,c.height=b.sh):(c.width=16,c.height=9):"image"==d&&(c.width=b.width(),c.height=b.height());return c}var C=function(){};C.resizeMedia=function(d,b,m,v){var c,w=m.width();var E=m.height();0==b?c=Na(d,v):1==b?c=r(!0,d,m,v):2==b&&(c=r(!1,d,m,v));d=parseInt((w-c.width)/2,10);E=parseInt((E-c.height)/2,10);v.css({width:c.width+"px",height:c.height+"px",left:d+"px",top:E+"px"})};C.retrieveObjectRatio2=function(d,b,m){var c={},k=b.width();
b=b.height();var r=(k-m)/(b-m),w=16/9;w<r?d?(c.width=(b-m)/9*16,c.height=b-m):(c.height=(k-m)/16*9,c.width=k-m):w>r?d?(c.height=(k-m)/16*9,c.width=k-m):(c.width=(b-m)/9*16,c.height=b-m):(c.width=k-m,c.height=b-m);return c};d.MVPAspectRatio=C})(window,jQuery);
(function(d){d.fn.mvp=function(b){function r(a){if(q){if(!Qb){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Qb=!0;ka.on(Ea,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault();Na(g)}}).on(pb,
function(a){a:if(Qb){Qb=!1;ka.off(Ea).off(pb);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault();Na(g)}})}return!1}}function Na(a){a=a.pageX-Rb.offset().left;0>a?a=0:a>sa&&(a=sa);var g=Math.max(0,Math.min(1,a/sa));if("audio"==f)try{n.currentTime=(g*n.duration).toFixed(1)}catch(I){}else if("video"==
f)try{l.currentTime=(g*l.duration).toFixed(1)}catch(I){}else"youtube"==f?y.seekTo(g*y.getDuration()):"vimeo"==f&&player.getDuration().then(function(a){z.seekTo(g*a)})}function C(a){var g=a.pageX-Rb.offset().left;if(!MVPUtils.isNumber(g))return!1;0>g?g=0:g>sa&&(g=sa);g=Math.max(0,Math.min(1,g/sa));if(!MVPUtils.isNumber(g))return!1;var d=e[0].getBoundingClientRect(),b=Ia[0].getBoundingClientRect();a=parseInt(a.pageX-Oa.scrollLeft()-d.left-H.outerWidth()/2);d="top"==Rd?parseInt(b.top-d.top+Ia.outerHeight()+
10,10):parseInt(b.top-d.top-H.outerHeight(),10);0>a?a=0:a+H.outerWidth()>e.width()&&(a=e.width()-H.outerWidth());H.css({left:a+"px",top:d+"px"}).show();if("audio"==f)var Ja=n.duration;else"video"==f?Ja=l.duration:"youtube"==f&&(Ja=y.getDuration());MVPUtils.isNumber(Ja)&&H.find("p").html(MVPUtils.formatCurrentTime(Ja*g)+" / "+MVPUtils.formatDuration(Ja))}function w(a){if(q){if(!Sb){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Sb=!0;ka.on(Ea,
function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault();m(g)}}).on(pb,function(a){a:if(Sb){Sb=!1;ka.off(Ea).off(pb);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var g=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&
a.originalEvent.changedTouches.length)g=a.originalEvent.changedTouches;else break a;if(1<g.length)break a;g=g[0]}else g=a;a.preventDefault();m(g)}})}return!1}}function c(){if(!q)return!1;0<F?(qc=F,F=0):F=qc;v()}function m(a){db?F=Math.max(0,Math.min(1,(a.pageX-qb.offset().left)/rb)):(F=Math.max(0,Math.min(1,(a.pageY-qb.offset().top)/rb)),F=1-F);v()}function v(a){"undefined"!==typeof a&&(F=a);"undefined"!==typeof F&&("audio"==f?(n.volume=F,n.muted=0==F?!0:!1):"video"==f?(l.volume=F,l.muted=0==F?!0:
!1):"youtube"==f?(y.setVolume(100*F),0==F?y.mute():y.unMute()):"vimeo"==f&&z.setVolume(F));sb.find(".mvp-btn").hide();0==F?sb.find(".mvp-btn-volume-off").show():0<F&&.5>F?sb.find(".mvp-btn-volume-down").show():.5<=F&&1>=F&&sb.find(".mvp-btn-volume-up").show();Sd.css(db?"width":"height",F*rb+"px");d(u).trigger("volumeChange",{instance:u,instanceName:P,volume:F})}function k(a){var g=db?a.pageX-qb.offset().left:a.pageY-qb.offset().top;0>g?g=0:g>rb&&(g=rb);g=Math.max(0,Math.min(1,g/rb));if(!MVPUtils.isNumber(g))return!1;
db||(g=1-g);g=parseInt(100*g,10);H.find("p").text(g+" %");var d=e[0].getBoundingClientRect(),b=fa[0].getBoundingClientRect();db?(g=parseInt(a.pageX-Oa.scrollLeft()-d.left-H.outerWidth()/2),a=parseInt(b.top-d.top-H.outerHeight())):(g=parseInt(b.left-d.left-H.outerWidth()/2+fa.outerWidth()/2),a=parseInt(a.pageY-Oa.scrollTop()-d.top-H.outerHeight()-10));H.css({left:g+"px",top:a+"px"}).show()}function U(a){var g="https:"==window.location.protocol?"https:":"http:",d=(window.screen.width-600)/2,b=(window.screen.height-
300)/2,Ja=h.title||"",f=h.description||"",c=h.thumb||h.thumbDefault,e=h.share||window.location.href,k;MVPUtils.relativePath(c)||(c=MVPUtils.qualifyURL(h.thumb));"facebook"==a?window.FB&&FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":e,"og:title":Ja,"og:description":f,"og:image":c}})},function(a){}):"twitter"==a?k=g+"//twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(Ja):"googleplus"==a?k=g+"//plus.google.com/share?url="+
encodeURIComponent(e):"tumblr"==a&&(k=g+"//www.tumblr.com/share/link?url="+encodeURIComponent(e)+"&amp;name="+encodeURIComponent(Ja)+"&amp;description="+encodeURIComponent(f));k&&window.open(k,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+d+",top="+b)}function E(a){(function(a,d,b){var g=a.getElementsByTagName(d)[0];a.getElementById(b)||(a=a.createElement(d),a.id=b,a.src="//connect.facebook.net/en_US/sdk.js",g.parentNode.insertBefore(a,g))})(document,"script",
"facebook-jssdk");window.fbAsyncInit=function(){FB.init({appId:a,xfbml:!0,version:"v2.9"})}}function x(){if(d(this).hasClass("mvp-menu-active"))return!1;var a=d(this).attr("data-label");"audio"==f?n.playbackRate=Number(a):"video"==f?l.playbackRate=Number(a):"youtube"==f?y.setPlaybackRate(Number(a)):"vimeo"==f&&z.setPlaybackRate(Number(a))}function D(a){rc&&rc.removeClass("mvp-menu-active");rc=sc.find(".mvp-menu-item[data-label='"+a+"']").addClass("mvp-menu-active")}function ya(){var a=[],g=h.path.length;
for(Pa=0;Pa<g;Pa++){var d=h.path[Pa];a.push(d.quality)}return a}function S(a,g){var b,t=a.length;for(b=0;b<t;b++){var f=a[b];var c=d("<li/>").addClass("mvp-menu-item").attr("data-label",f).on("click",Bb).appendTo(Tb);d('<a href="#"/>').text(f).appendTo(c);g==f&&(Qa=c.addClass("mvp-menu-active"))}Ub.show()}function Bb(){if(d(this).hasClass("mvp-menu-active"))return!1;Qa&&Qa.removeClass("mvp-menu-active");Qa=d(this).addClass("mvp-menu-active");var a=Qa.attr("data-label");h.quality=a;tb(!0)}function ra(a){Qa&&
Qa.removeClass("mvp-menu-active");Qa=Tb.find(".mvp-menu-item[data-label='"+a+"']").addClass("mvp-menu-active")}function Pd(){var a,g=h.subtitles.length;for(a=0;a<g;a++){var b=h.subtitles[a];var t=d("<li/>").addClass("mvp-menu-item").attr("data-label",b.label).on("click",$c).appendTo(eb);d('<a href="#"/>').text(b.label).appendTo(t);b["default"]&&(Y=t.addClass("mvp-menu-active"),ad(b))}t=d("<li/>").addClass("mvp-menu-item").attr("data-label",Vb).on("click",$c).appendTo(eb);d('<a href="#"/>').text(Vb).appendTo(t);
Y||(Y=t.addClass("mvp-menu-active"));Wb.show()}function $c(){if(d(this).hasClass("mvp-menu-active"))return!1;Y&&Y.removeClass("mvp-menu-active");Y=d(this).addClass("mvp-menu-active");var a=Y.attr("data-label");u.setSubtitle(a)}function ad(a){za=[];d.ajax({url:a.src}).done(function(g){g=g.replace(/\r\n|\r|\n/g,"\n");g=MVPUtils.strip(g);g=g.split("\n\n");var d,b=0,f;for(d in g){var c=g[d].split("\n");if("WEBVTT"!=c){if(2<=c.length){var e=MVPUtils.strip(c[1].split(" --\x3e ")[0]);var k=MVPUtils.strip(c[1].split(" --\x3e ")[1]);
var h=c[2];if(2<c.length)for(f=3;f<c.length;f++)h+="\n"+c[f];za[b]={};za[b].start=MVPUtils.toSeconds(e);za[b].end=MVPUtils.toSeconds(k);za[b].text=h}b++}}Xb[a.label]=za;fb=!0}).fail(function(a,d,b){console.log(a,d,b)})}function Qd(a){a.preventDefault();if(!q)return!1;a=d(a.currentTarget);a.hasClass("mvp-playback-toggle")||a.hasClass("mvp-big-play")?u.togglePlayback():a.hasClass("mvp-playlist-toggle")?dd():a.hasClass("mvp-info-toggle")?Yb():a.hasClass("mvp-info-close")?Yb(!1):a.hasClass("mvp-share-close")?
Zb(!1):a.hasClass("mvp-prev-toggle")?tc():a.hasClass("mvp-next-toggle")?$b():a.hasClass("mvp-loop-toggle")?B.setLooping():a.hasClass("mvp-shuffle-toggle")?B.setRandom():a.hasClass("mvp-seek-backward")?u.seekBackward():a.hasClass("mvp-seek-forward")?u.seekForward():a.hasClass("mvp-share-toggle")?Zb():a.hasClass("mvp-share-item")&&U(a.attr("data-type").toLowerCase())}function bd(a){a.preventDefault();if(!q)return!1;a=d(a.currentTarget);if(N&&N.is(a))return!1;uc=!0;B.processPlaylistRequest(a.index());
d(u).trigger("clickPlaylistItem",{instance:u,instanceName:P})}function cd(a){a.preventDefault();if(!q)return!1;a=d(a.currentTarget);if(N&&N.is(a))return!1;a.addClass("mvp-playlist-item-selected")}function ed(a){a.preventDefault();if(!q)return!1;a=d(a.currentTarget);if(N&&N.is(a))return!1;a.removeClass("mvp-playlist-item-selected")}function Cb(){N.removeClass("mvp-playlist-item-selected");d(u).trigger("playlistItemEnabled",{instance:u,instanceName:P});N=null}function Ud(){N&&Cb();var a=B.getCounter();
N=p.children(".mvp-playlist-item").eq(a);if(N.length){N.addClass("mvp-playlist-item-selected");if(ub&&0<A){if(!uc)if("scroll"==ta)"horizontal"==ha?V.mCustomScrollbar("scrollTo",parseInt(N.position().left),{scrollInertia:500}):V.mCustomScrollbar("scrollTo",parseInt(N.position().top),{scrollInertia:500});else if("buttons"==ta){if("horizontal"==ha){a=K.width();var g=p.width(),b="translateX"}else a=K.height(),g=p.height(),b="translateY";if(g<a-0)return;la.show();ia.show();var f=-N.index()*Z;0<=f?(f=0,
la.hide()):f<=a-g&&(f=a-g,ia.hide());ma=f;p.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){Ra=!1}).css({"-webkit-transform":""+b+"("+f+"px)","-ms-transform":""+b+"("+f+"px)",transform:""+b+"("+f+"px)"})}uc=!1}d(u).trigger("playlistItemDisabled",{instance:u,instanceName:P})}}function fd(a){a.preventDefault();if(!q||!f)return!1;Fa()}function gd(a){if(a.relatedTarget||a.toElement){a.preventDefault();if(!q||!f)return!1;W&&gb()}}function Fa(){h&&Aa&&(hb.addClass("mvp-interface-visible"),
Q&&Q.addClass("mvp-subtitle-bottom"),Db=!1,O&&(J&&clearTimeout(J),J=setTimeout(function(){clearTimeout(this);J=null;gb()},5E3)))}function gb(){!W||O&&(Sa&&"video_360"==L||"image_360"==L||"youtube"==f)||(hb.removeClass("mvp-interface-visible"),Q&&Q.removeClass("mvp-subtitle-bottom"),H.hide(),Eb.hide().removeClass("mvp-menu-bottom"),Fb.hide().removeClass("mvp-menu-bottom"),Gb.hide().removeClass("mvp-menu-bottom"),fa.css("display","none"),Db=!0,O&&(J&&clearTimeout(J),J=setTimeout(function(){clearTimeout(this);
J=null;gb()},5E3)))}function Hb(a){J&&clearTimeout(J);a&&(hd!=a.clientX&&(Fa(),document.body.style.cursor="default"),hd=a.clientX);J=setTimeout(function(){clearTimeout(this);J=null;W&&(gb(),document.body.style.cursor="none")},5E3)}function Yb(a){if("undefined"!==typeof a){if(Ta&&1==a||!Ta&&0==a)return!1;Ta=!a}Ua&&Zb(!1);Ta?(vc.hide(),ib&&(u.playMedia(),ib=!1)):(W&&(u.pauseMedia(),ib=!0),vc.show());Ta=!Ta}function Zb(a){if("undefined"!==typeof a){if(Ua&&1==a||!Ua&&0==a)return!1;Ua=!a}Ta&&Yb(!1);Ua?
(wc.hide(),ib&&(u.playMedia(),ib=!1)):(W&&(u.pauseMedia(),ib=!0),wc.show());Ua=!Ua}function id(a){G=!0;X.show();Va?xc():p.find(".mvp-playlist-item").remove();var g=d(a);if(0==g.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),jd(),!1;yc=a;d(u).trigger("playlistStartLoad",{instance:u,instanceName:P});Ib=-1;R=[];na=[];if(void 0!=g.attr("data-type")&&"xml"==g.attr("data-type"))Vd(ac(g));else{var b,f,c;g.children(".mvp-playlist-item").each(function(){f=
d(this);c=f.attr("data-type");RegExp(/^image|^audio|^video/).test(c)?na.push(f.clone()):void 0!=f.attr("data-noapi")?na.push(f.clone()):(b=ac(f),na.push(b))});A=na.length;da()}}function da(){Ib++;if(Ib>A-1)zc();else{var a=na[Ib],g=a.type;g?RegExp(/^youtube/).test(g)?(Ba||(Ba=new MVPYoutubeLoader(b),d(Ba).on("MVPYoutubeLoader.END_LOAD",function(a,g){var b,d=g.length;for(b=0;b<d;b++){var f=g[b];R.push(f)}ua?zc():da()})),Ba.setData(a)):RegExp(/^vimeo/).test(g)?(Ca||(Ca=new MVPVimeoLoader(b),d(Ca).on("MVPVimeoLoader.END_LOAD",
function(a,g){var b,d=g.length;for(b=0;b<d;b++){var f=g[b];R.push(f)}ua?zc():da()})),Ca.setData(a)):RegExp(/^folder/).test(g)?Wd(a):RegExp(/^iframe/).test(g)?(R.push(a),da()):RegExp(/^image|^audio|^video/).test(g)&&(R.push(a),da()):(R.push(a),da())}}function Wd(a){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires online server connection."),da(),!1;var g=a.type;if("folder_video"==g)var b=["mp4"];else"folder_audio"==g?(a.id3&&
(Ac=jb=R.length-1),b=["mp3","wav"]):"folder_image"==g&&(b=["jpg","jpeg","png","gif"]);d.ajax({type:"GET",url:kd+"includes/folder_parser.php",data:{type:b,dir:a.path,limit:a.limit||100},dataType:"json"}).done(function(b){MVPUtils.keysrt(b,"filename");var f,I=b.length;for(f=0;f<I;f++){var c=b[f];if("folder_audio"==g){if(/mp3|wav/.test(c.basename)){var t=d.extend(!0,{},a);t.type="audio";t.origtype="folder_audio";var e=c.fullpath;var h={};t.path=[(h.quality=bc,h[c.extension]=e,h)];t.poster=e.substr(0,
e.lastIndexOf("/")+1)+"poster/"+c.filename+".jpg";t.thumb||(t.thumb=t.poster.replace(/\/main\/(?!.*\/poster\/)/,"/thumb/"));t.share||(t.share=e);t.title||(t.title=c.filename);R.push(t);jb++}}else"folder_video"==g?/mp4/.test(c.basename)&&(t=d.extend(!0,{},a),t.type="video",t.origtype="folder_video",e=c.fullpath,t.path=[{quality:bc,mp4:e}],t.poster=e.substr(0,e.lastIndexOf("/")+1)+"poster/"+c.filename+".jpg",t.thumb||(t.thumb=t.poster.replace(/\/main\/(?!.*\/poster\/)/,"/thumb/")),t.share||(t.share=
e),t.title||(t.title=c.filename),R.push(t)):"folder_image"==g&&/jpg|jpeg|png|gif/.test(c.basename)&&(t=d.extend(!0,{},a),t.type="image",t.origtype="folder_image",e=c.fullpath,t.path=[{quality:bc,image:e}],t.thumb||(t.thumb=e.substr(0,e.lastIndexOf("/")+1)+"thumb/"+c.filename+".jpg"),t.share||(t.share=e),t.title||(t.title=c.filename),R.push(t))}"folder_audio"==g?a.id3?Bc():da():da()}).fail(function(a,g,b){console.log(a,g,b);da()})}function Bc(){var a=R[jb];jsmediatags.read(a.path[0].mp3||a.path[0].wav,
{onSuccess:function(g){var b=g.tags;g=b.picture;b.artist&&(a.artist=b.artist);b.title&&(a.title=b.title);b.album&&(a.album=b.album);if(g){b="";var d,f=g.data.length;for(d=0;d<f;d++)b+=String.fromCharCode(g.data[d]);a.thumb="data:"+g.format+";base64,"+window.btoa(b)}jb--;jb>Ac?Bc():da()},onError:function(a){console.log("ID3 error: ",a.type,a.info);jb--;jb>Ac?Bc():da()}})}function Vd(a){d.ajax({type:"GET",url:a.path,dataType:"html"}).done(function(a){var g,b,f;d(a).children(".mvp-playlist-item").each(function(){g=
d(this);b=g.attr("data-type");RegExp(/^image|^audio|^video/).test(b)?na.push(g):void 0!=g.attr("data-noapi")?na.push(g):(f=ac(g),na.push(f))});A=na.length;da()}).fail(function(a,b,d){console.log(a,b,d);da()})}function zc(){var a,g=R.length,b,f=0;for(a=0;a<g;a++){vb&&f++;var c=R[a];var e=c.type;if(c instanceof d&&c.hasClass("mvp-playlist-item"))e=c;else{c.origclasses||(c.origclasses="mvp-playlist-item");e=d('<div class="'+c.origclasses+'"/>').attr("data-type",e);delete c.origclasses;if(b=c.thumb||
c.thumbDefault){var h=d("<div/>").addClass("mvp-playlist-thumb").appendTo(e);d(new Image).addClass("mvp-thumbimg").appendTo(h).attr("src",b);e.attr("data-thumb",b)}if(c.title||c.description)b=d('<div class="mvp-playlist-info"></div>').appendTo(e),c.title&&(d('<span class="mvp-playlist-title">'+c.title+"</span>").appendTo(b),e.attr("data-title",c.title)),c.description&&(d('<span class="mvp-playlist-description">'+c.description+"</span>").appendTo(b),e.attr("data-description",c.description));if(c.subtitles){b=
d('<div class="mvp-subtitles"></div>').appendTo(e);var k=c.subtitles.length;for(h=0;h<k;h++){var m=c.subtitles[h];var l='<div data-label="'+m.label+'" data-src="'+m.src+'"';l=m["default"]?l+" data-default></div>":l+"></div>";d(l).appendTo(b)}}if("iframe"==c.type)e.attr("data-path",c.path);else if("video"==c.type||"audio"==c.type||"image"==c.type){k=c.path.length;l="[";for(h=0;h<k;h++)m=c.path[h],l+='{"quality": "'+m.quality+'", "'+m.ext+'": "'+m.src+'"}',h<k-1&&(l+=",");l+="]";e.attr("data-path",
l);c.defaultQuality&&e.attr("data-quality",c.defaultQuality)}c.deeplink&&e.attr("data-deeplink",c.deeplink);c.id&&e.attr("data-path",c.id);c.poster&&e.attr("data-poster",c.poster);c.download&&e.attr("data-download",c.download);c.share&&e.attr("data-share",c.share);c.duration&&e.attr("data-duration",c.duration);c.start&&e.attr("data-start",c.start);c.end&&e.attr("data-end",c.end);c.aspectRatio&&e.attr("data-aspect-ratio",c.aspectRatio);c.playbackRate&&e.attr("data-playback-rate",c.playbackRate);c.quality&&
e.attr("data-quality",c.quality);c.origtype&&("folder_audio"==c.origtype||"folder_video"==c.origtype||"folder_image"==c.origtype)&&e.attr("data-path",JSON.stringify(c.path));c.width&&e.attr("data-width",c.width);c.height&&e.attr("data-height",c.height);c.content&&(e.append(c.content),delete c.content)}if(vb){n?n.after(e):wb?e.appendTo(p):p.children("div").eq(oa).before(e);var n=e}else e.appendTo(p);if(ub&&(e.on("click",bd),!O))e.on("mouseenter",cd).on("mouseleave",ed)}Va=p;A=p.children(".mvp-playlist-item").length;
console.log("playlistLength = ",A);"buttons"!=ta&&"hover"!=ta||"horizontal"!=ha||p.width(A*Z);vb?(a=B.getCounter(),B.setPlaylistItems(A,!1),oa<=a&&(wb||B.reSetCounter(a+f)),cc&&!O&&(ea=!0),dc?(dc=!1,B.setCounter(oa,!1)):cc&&(Wa=!1,B.setCounter(oa,!1))):B.setPlaylistItems(A);jd();d(u).trigger("playlistEndLoad",{instance:u,instanceName:P})}function ld(){if("scroll"==ta)V.mCustomScrollbar({axis:"horizontal"==ha?"x":"y",theme:b.playlistScrollTheme,scrollInertia:0,scrollButtons:{enable:!0},mouseWheel:{normalizeDelta:!0,
deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){V.find(".mCSB_container").addClass("mvp-mCSB_full")},onOverflowY:function(){V.find(".mCSB_container").removeClass("mvp-mCSB_full")},onTotalScroll:function(){b.loadMoreOnTotalScroll&&!G&&(G=!0,X.show(),ua=!0,R=[],"youtube"==f?Ba.resumeLoad():"vimeo"==f&&Ca.resumeLoad())},alwaysTriggerOffsets:!1}});else if("buttons"==ta){if(!O)V.on("mousewheel",function(a,g,d,c){if(!q||
G||!Xa)return!1;"horizontal"==ha?(a=V.width(),d=p.width(),c="translateX"):(a=V.height(),d=p.height(),c="translateY");if(!(d<a-0)){la.show();ia.show();g=0<g?1:-1;if(ma)var e=ma;else e=p[0].style.transform.replace(/[^\d.]/g,""),e=parseInt(e)||0;e+=Xd*g;0<e?(e=0,la.hide()):e<=a-d&&(e=a-d,ia.hide(),b.loadMoreOnTotalScroll&&!G&&(G=!0,X.show(),ua=!0,R=[],"youtube"==f?Ba.resumeLoad():"vimeo"==f&&Ca.resumeLoad()));ma=e;p.css({"-webkit-transform":""+c+"("+e+"px)","-ms-transform":""+c+"("+e+"px)",transform:""+
c+"("+e+"px)"});return!1}});la.on("click",function(){if(!q||G||Ra)return!1;Ra=!0;if("horizontal"==ha)var a=V.width(),g=p.width(),b="translateX";else a=V.height(),g=p.height(),b="translateY";if(!(g<a-0)){la.show();ia.show();ma?g=ma:(g=p[0].style.transform.replace(/[^\d.]/g,""),g=parseInt(g)||0);if(0!=g%Z){for(var d=-(g%Z+Z);d<=a-Z;)d+=Z;g+=d}else g+=Z*Math.floor(a/Z);0<=g&&(g=0,la.hide());ma=g;p.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){Ra=!1}).css({"-webkit-transform":""+
b+"("+g+"px)","-ms-transform":""+b+"("+g+"px)",transform:""+b+"("+g+"px)"})}});ia.on("click",function(){if(!q||G||Ra)return!1;Ra=!0;if("horizontal"==ha)var a=V.width(),g=p.width(),d="translateX";else a=V.height(),g=p.height(),d="translateY";if(!(g<a-0)){la.show();ia.show();if(ma)var c=ma;else c=p[0].style.transform.replace(/[^\d.]/g,""),c=parseInt(c)||0;if(0!=c%Z){for(var e=c%Z+Z;e<=a-Z;)e+=Z;c-=e}else c-=Z*Math.floor(a/Z);c<=a-g&&(c=a-g,ia.hide(),b.loadMoreOnTotalScroll&&!G&&(G=!0,X.show(),ua=!0,
R=[],"youtube"==f?Ba.resumeLoad():"vimeo"==f&&Ca.resumeLoad()));ma=c;p.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){Ra=!1}).css({"-webkit-transform":""+d+"("+c+"px)","-ms-transform":""+d+"("+c+"px)",transform:""+d+"("+c+"px)"})}});md&&nd()}else if("hover"==ta){if(!O)V.on("mousemove",function(a){if(!q||G||!Xa)return!1;if("horizontal"==ha){var g=K.width(),b=p.width();if(b<g-0)return;var d=parseInt(V.css("left"),10)+K.offset().left;a=(g-b)/g*(a.pageX-d);p.css("left",
a+"px")}else{g=K.height();b=p.height();if(b<g-0)return;d=parseInt(V.css("top"),10)+K.offset().top;a=(g-b)/g*(a.pageY-d);p.css("top",a+"px")}return!1});md&&nd()}Cc=!0}function nd(){var a,g,d,c,e,h=!1;p.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").on("touchstart.ap",function(b){if(!q||G)return!1;b=b.originalEvent.touches[0];a=p.position().left;g=p.position().top;d=b.pageX;c=b.pageY;e=!1;h=!0}).on("touchmove.ap",function(t){if(h){t=t.originalEvent.touches[0];la.show();ia.show();
if("horizontal"==ha){var I=a-d+t.pageX,k=K.width(),l=p.width();if(l<k-0)return;0<I?(I=0,la.hide()):I<=k-l&&(I=k-l,ia.hide(),b.loadMoreOnTotalScroll&&!G&&(G=!0,X.show(),ua=!0,R=[],"youtube"==f?Ba.resumeLoad():"vimeo"==f&&Ca.resumeLoad()));p.css("left",I+"px")}else{I=g-c+t.pageY;k=K.height();l=p.height();if(l<k-0)return;0<I?(I=0,la.hide()):I<=k-l&&(I=k-l,ia.hide(),b.loadMoreOnTotalScroll&&!G&&(G=!0,X.show(),ua=!0,R=[],"youtube"==f?Ba.resumeLoad():"vimeo"==f&&Ca.resumeLoad()));p.css("top",I+"px")}e=
e||5<Math.abs(d-t.pageX)||5<Math.abs(c-t.pageY);return!1}}).on("touchend.ap",function(a){h=!1}).on("click.ap-touchclick",function(a){if(e)return e=!1})}function jd(){X.hide();G=!1;q||(q=!0,od&&p.sortable(),ub&&!Cc&&ld(),M.on("mouseenter",fd).on("mouseleave",gd),Jb(),d(u).trigger("setupDone",{instance:u,instanceName:P}));if(ub){var a=[];p.find(".mvp-thumbimg:not(.mvp-visible)").each(function(){a.push(d(this))});var g=0,c=a.length,e;for(e=0;e<c;e++)setTimeout(function(){clearTimeout(this);a[g].addClass("mvp-visible");
g++},50+50*e);b.truncatePlaylistDescription&&p.find(".mvp-playlist-info:not(.is-truncated)").each(function(){d(this).dotdotdot({watch:b.truncateWatch})})}!Dc&&!vb&&0<A&&(c=b.activeItem,c>A-1&&(c=A-1),-1<c&&B.setCounter(c,!1),Dc=!0);vb=!1;ua&&(ua=!1,"buttons"==ta&&ia.show())}function Yd(){p.find(".mvp-playlist-item").each(function(){var a=d(this).on("click",bd);if(!O)a.on("mouseenter",cd).on("mouseleave",ed)});A=p.children(".mvp-playlist-item").length;B.setPlaylistItems(A);if(0<A){Va=p;"buttons"!=
ta&&"hover"!=ta||"horizontal"!=ha||p.width(A*Z);var a=[];p.find(".mvp-thumbimg:not(.mvp-visible)").each(function(){a.push(d(this))});var g=0,c=a.length,e;for(e=0;e<c;e++)setTimeout(function(){clearTimeout(this);a[g].addClass("mvp-visible");g++},50+50*e);b.truncatePlaylistDescription&&p.find(".mvp-playlist-info:not(.is-truncated)").each(function(){d(this).dotdotdot({watch:b.truncateWatch})})}q||(q=!0,od&&p.sortable(),ub&&!Cc&&ld(),M.on("mouseenter",fd).on("mouseleave",gd),Jb(),d(u).trigger("setupDone",
{instance:u,instanceName:P}));X.hide();G=!1;d(u).trigger("playlistEndLoad",{instance:u,instanceName:P});c=b.activeItem;c>A-1&&(c=A-1);-1<c&&B.setCounter(c,!1)}function Zd(){var a=h.path.length;h.quality||(h.quality=bc);var b=0;a:for(;b<a;b++){var d=h.path[b];for(var c in d)if(d[c]==h.quality){"audio"==f?Ya&&d.hls?(aa=d.hls,f="audio",L="hls"):pd&&d.wav?aa=d.wav:pd&&"wav"==d.ext?aa=d.src:qd&&d.mp3?aa=d.mp3:qd&&"mp3"==d.ext&&(aa=d.src):"video"==f?Ya&&d.hls?(aa=d.hls,f="video",L="hls"):rd&&d.mp4?aa=d.mp4:
rd&&"mp4"==d.ext&&(aa=d.src):"image"==f&&(d.image?aa=d.image:d.src&&(aa=d.src));break a}}console.log(aa)}function tb(a){console.log("setMedia");Kb=a;if(f&&!Wa)if(Kb){console.log("cleanMediaQuality");kb=!1;ja&&cancelAnimationFrame(ja);pa=null;if("audio"==f)n&&(pa=n.currentTime),Ya&&"hls"==L&&Da.detachMedia(),n&&(n.pause(),n.src=""),lb&&lb.off("ended pause play ratechange loadedmetadata error");else if("video"==f){"video"==f&&l&&(pa=l.currentTime);Ya&&"hls"==L&&Da.detachMedia();if(l){l.pause();try{l.currentTime=
0}catch(te){}l.src=""}l=null;ca&&ca.off("ended loadedmetadata ratechange waiting playing play pause error seeked")}else"image"==f&&("image_360"==L?(xb&&xb.hide(),yb&&yb.reset(),ec=!1):(Ec.hide().find(".mvp-media").remove(),mb=null));Ga.hide();Aa=W=!1}else Za();if(!Kb&&!Wa)if(h=fc?fc:ac(N),fc=null,"youtube_single"==h.type?h.type="youtube":"vimeo_single"==h.type&&(h.type="vimeo"),f=h.type,console.log(f,h),"video_360"==f?(f="video",L="video_360"):"image_360"==f&&(f="image",L="image_360"),va=void 0!=
h.aspectRatio?h.aspectRatio:b.aspectRatio,h.subtitles&&Pd(),"lightbox"==$d&&(wa.css("display","block"),a=wa.height(),sd.height()>a&&sd.width(1.7777777*a),1!=wa.css("opacity")&&setTimeout(function(){clearTimeout(this);wa.css("opacity",1)},50)),"audio"==f)h.poster&&(d(new Image).addClass("mvp-media").appendTo(Fc.show()).on("load",function(){ba=d(this);MVPAspectRatio.resizeMedia("image",va,M,ba);ba.addClass("mvp-visible")}).on("error",function(a){console.log(a)}).attr("src",h.poster),ea||Ga.show());
else if("video"==f&&!ea&&h.poster&&!Wa){Wa=!0;d(new Image).addClass("mvp-media").appendTo($a.show()).on("load",function(){ba=d(this);MVPAspectRatio.resizeMedia("image",va,M,ba);ba.addClass("mvp-visible");Ga.show()}).on("error",function(a){console.log(a)}).attr("src",h.poster);return}Wa&&(pa=0,Wa=!1);if("audio"==f||"video"==f||"image"==f)Zd(),Kb||(a=ya(),td&&1==a.length||"hls"!=L&&S(a,h.quality));if("audio"==f)ud||(lb=d(document.createElement("audio")).attr("preload",vd),n=lb[0],ud=!0),n.src=aa,lb.on("ended",
function(){nb()}).on("loadedmetadata",function(){h.playbackRate?n.playbackRate=Number(h.playbackRate):D(1);null!=pa?n.currentTime=pa:null!=h.start&&(n.currentTime=h.start);null!=pa?n.play():ea?(n.play(),Fa()):Ga.show();pa=null}).on("play",function(){Gc()}).on("pause",function(){Hc()}).on("ratechange",function(){D(n.playbackRate)}).on("error",function(a){d(u).trigger("mediaError",{instance:u,instanceName:P,counter:B.getCounter()})}),Ya&&"hls"==L?Da.attachMedia(n):ea&&(n.load(),n.play());else if("video"==
f){Ic?($a.show(),ca=$a.find(".mvp-media"),l=ca[0]):(a='<video class="mvp-media" preload="'+vd+'" playsinline>',a+='<source src="'+aa+'" />',a+="</video>",$a.show().html(a),ca=$a.find(".mvp-media"),l=ca[0],O&&b.forceMobileAutoplay&&v(0));if(Sa&&"video_360"==L&&("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),!wd)){ab=new THREE.WebGLRenderer({antialias:!0});ab.setSize(640,360);ab.domElement.className+="mvp-canvas-video";qa.prepend(d(ab.domElement));
gc=qa.find(".mvp-canvas-video");zb=new THREE.Texture(l);zb.minFilter=THREE.LinearFilter;zb.magFilter=THREE.LinearFilter;zb.format=THREE.RGBFormat;hc=new THREE.Scene;a=new THREE.SphereGeometry(500,60,40);a.scale(-1,1,1);var g=new THREE.MeshBasicMaterial({map:zb});a=new THREE.Mesh(a,g);hc.add(a);Ha=new THREE.PerspectiveCamera(90,640/360,.1,1E4);hc.add(Ha);Ha.position.x+=.1;Lb=new THREE.OrbitControls(Ha,qa[0]);Lb.addEventListener("change",xd);Lb.enableZoom=!1;wd=!0}ca.on("ended",function(){nb()}).on("loadedmetadata",
function(){MVPAspectRatio.resizeMedia("video",va,M,ca);ca.addClass("mvp-visible");h.playbackRate?l.playbackRate=Number(h.playbackRate):D(1);null!=pa?l.currentTime=pa:null!=h.start&&(l.currentTime=h.start);null!=pa?l.play():ea?(l.play(),Fa()):Ga.show();pa=null;ca.find("source").remove()}).on("waiting",function(){X.show()}).on("playing",function(){X.hide()}).on("play",function(){Gc()}).on("pause",function(){Hc();X.hide()}).on("seeking",function(){kb=!1}).on("seeked",function(){X.hide();Sa&&"video_360"==
L&&(kb=!0,requestAnimationFrame(Jc))}).on("ratechange",function(){D(l.playbackRate)}).on("error",function(a){switch(a.target.error.code){case a.target.error.MEDIA_ERR_ABORTED:console.log("You aborted the video playback.");break;case a.target.error.MEDIA_ERR_NETWORK:console.log("A network error caused the video download to fail part-way.");break;case a.target.error.MEDIA_ERR_DECODE:console.log("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");
break;case a.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:console.log("An unknown error occurred.")}});Ya&&"hls"==L?Da.attachMedia(l):(l.src=aa,l.load());yd&&!Ic&&l.play();Ic=!0}else if("image"==f)"image_360"==L?("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),zd||(bb=new THREE.PerspectiveCamera(75,
640/360,1,1100),bb.position.x=1,Kc=new THREE.Scene,a=new THREE.SphereBufferGeometry(500,60,40),a.scale(-1,1,1),Lc=new THREE.TextureLoader,Mc=new THREE.MeshBasicMaterial({map:Lc}),Ad=new THREE.Mesh(a,Mc),Kc.add(Ad),Ka=new THREE.WebGLRenderer,Ka.setPixelRatio(window.devicePixelRatio),Ka.setSize(640,360),Ka.domElement.className+="mvp-canvas-image",qa.prepend(d(Ka.domElement)),xb=qa.find(".mvp-canvas-image"),yb=new THREE.OrbitControls(bb),yb.addEventListener("change",xd),zd=!0),Lc.load(aa,function(a){xb.show();
Mc.map=a;a=qa.width();var b=qa.height();Ka.setSize(a,b);bb.aspect=a/b;bb.updateProjectionMatrix();ja&&cancelAnimationFrame(ja);ja=requestAnimationFrame(Bd);W=Aa=!0;Mb.show();Nb=!0;Fa();ec=!0;h.duration&&(La&&clearTimeout(La),La=setTimeout(function(){clearTimeout(this);nb()},h.duration))},function(a){},function(a){})):(X.show(),d(new Image).addClass("mvp-media").prependTo(Ec.show()).on("load",function(){X.hide();mb=d(this);MVPAspectRatio.resizeMedia("image",va,M,mb);mb.addClass("mvp-visible");W=Aa=
!0;Fa();h.duration&&(La&&clearTimeout(La),La=setTimeout(function(){clearTimeout(this);nb()},h.duration))}).on("error",function(a){console.log(a)}).attr("src",aa)),hb.show();else if("youtube"==f){var c=function(a){switch(a.data){case 2:console.log("Error code = "+a.data+": The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");
break;case 100:console.log("Error code = "+a.data+": Video not found, removed, or marked as private");break;case 101:console.log("Error code = "+a.data+": Embedding disabled for this video");break;case 150:console.log("Error code = "+a.data+": Video not found, removed, or marked as private [same as error 100]")}},e=function(a){Ab.is(":visible")&&-1!=a.data&&(0==a.data?ic||(ic=!0,nb()):1==a.data?(Nc||(ic=!1,h.quality&&y.setPlaybackQuality(h.quality),a=y.getAvailableQualityLevels(),td&&1==a.length||
S(a,y.getPlaybackQuality()),h.playbackRate&&1!=h.playbackRate?y.setPlaybackRate(Number(h.playbackRate)):D(1),Nc=!0),Gc()):2==a.data&&Hc())},k=function(a){D(a.data)},m=function(a){ra(a.data)},p=function(a){Cd=!0;O&&b.forceMobileAutoplay&&v(0);ea&&y.playVideo()};if(Dd)Cd&&(ea?y.loadVideoById({videoId:h.path,startSeconds:h.start,endSeconds:h.end,suggestedQuality:h.quality}):y.cueVideoById({videoId:h.path,startSeconds:h.start,endSeconds:h.end,suggestedQuality:h.quality}));else{var q="ytplayer"+Math.floor(16777215*
Math.random());a=("https:"==window.location.protocol?"https:":"http:")+"//www.youtube.com/embed/"+h.path+"?controls=0&amp;rel=0&amp;showinfo=0&amp;enablejsapi=1&amp;playsinline=1&amp;modestbranding=0&amp;wmode=transparent";h.start&&(a+="&amp;start="+h.start);h.end&&(a+="&amp;end="+h.end);Ma=d("<iframe/>",{id:q,frameborder:0,src:a,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});Ab.show().append(Ma);window.YT||(a=document.createElement("script"),a.src=
"https://www.youtube.com/iframe_api",g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(a,g));var r=setInterval(function(){window.YT&&window.YT.Player&&(r&&clearInterval(r),y=new YT.Player(q,{events:{onReady:p,onPlaybackQualityChange:m,onPlaybackRateChange:k,onStateChange:e,onError:c}}))},100);Dd=!0}window.onYouTubeIframeAPIReady=function(){};Ab.show();h.width&&h.height&&(Ma.sw=h.width,Ma.sh=h.height,MVPAspectRatio.resizeMedia("youtube",va,Ab,Ma))}else if("vimeo"==f)if("file:"==
window.location.protocol&&console.log("Playing Vimeo requires online server connection!"),Ed)Fd&&(Pc.show(),z.loadVideo(h.path));else{var w=function(a){console.log("Vimeo Player Error!",a)},x=function(){nb()},A=function(){z.on("play",E);z.on("pause",C);z.on("finish",x);z.on("error",w);ea&&z.play()},C=function(){W=!1},E=function(){Oc||(h.start&&z.setCurrentTime(h.start).then(function(a){})["catch"](function(a){console.log(a.name)}),h.playbackRate&&z.setPlaybackRate(h.playbackRate).then(function(a){})["catch"](function(a){console.log(a.name)}),
Oc=!0);W=!0};g="player"+Math.floor(16777215*Math.random());a="//player.vimeo.com/video/"+h.path+"?color=00adef&byline=1&portrait=1&title=1&autopause=1&loop=0&api=1";h.quality&&(a+="&quality="+h.quality);var G=d("<iframe/>",{id:g,frameborder:0,src:a,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});Pc.show().append(G);window.Vimeo||(a=document.createElement("script"),a.src="//player.vimeo.com/api/player.js",g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(a,
g));r=setInterval(function(){window.Vimeo&&(r&&clearInterval(r),z=new Vimeo.Player(G[0]),z.setVolume(F),z.on("loaded",A),Fd=!0)},100);Ed=!0}else"iframe"==f&&d('<iframe src="'+h.path+'" style="border: 0px none transparent; width:100%; height:100%;" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>').appendTo(Gd.show());if(!Kb){if("audio"==f||"video"==f||"youtube"==f)Ia.show(),ob.show(),jc.show(),kc.show(),Qc.show(),Hd.show(),Rc.show();h.description?(Sc.html(h.description),Ob.show()):
N&&N.find(".mvp-playlist-description").length?(Sc.html(N.find(".mvp-playlist-description").html()),Ob.show()):Ob.hide();ae&&h.download?Id.show().find("a").attr("href",h.download).attr("download",""):Id.hide();!O&&be&&(a=M.offset().top,Oa.scrollTop()>a&&d("html,body").animate({scrollTop:a},500))}"vimeo"!=f&&"iframe"!=f||hb.hide();d(u).trigger("mediaRequest",{instance:u,instanceName:P,counter:B.getCounter()})}function xd(){Nb&&setTimeout(function(){clearTimeout(this);Mb.hide();Nb=!1},1E3)}function Za(){console.log("cleanMedia");
kb=!1;ja&&cancelAnimationFrame(ja);La&&clearTimeout(La);La=null;Mb.hide();Nb=!1;Ya&&"hls"==L&&Da.detachMedia();if("audio"==f)n&&(n.pause(),n.src=""),lb&&lb.off("ended pause play ratechange loadedmetadata error"),Fc.hide();else if("video"==f){Sa&&"video_360"==L&&(gc&&gc.hide(),Lb&&Lb.reset());if(l){l.pause();try{l.currentTime=0}catch(a){}l.src="";l=null}ca&&ca.off("ended loadedmetadata ratechange waiting playing play pause error seeked");$a.hide()}else"image"==f?"image_360"==L?(xb&&xb.hide(),yb&&yb.reset(),
ec=!1):(Ec.hide().find(".mvp-media").remove(),mb=null):"youtube"==f?y&&(ic=!0,Ab.hide(),y.stopVideo(),Nc=!1,Ma&&(Ma.sw=null,Ma.sh=null)):"vimeo"==f?(z&&(z.off("play"),z.off("pause"),z.off("finish"),z.off("error"),z.off("playProgress"),z.unload().then(function(){})["catch"](function(a){console.log(a)})),Oc=!1,Pc.hide()):"iframe"==f&&Gd.empty().hide();ba&&(ba.remove(),ba=null);e.removeClass("mvp-holder-visible");Ia.hide();ob.hide();jc.hide();kc.hide();Qc.hide();Hd.hide();Rc.hide();Ub.hide();Tb.empty();
fb=!1;za=[];Xb=[];Pb.empty();Y=Q=null;eb.empty();Wb.hide();ea||hb.hide();hb.removeClass("mvp-interface-visible");Q&&Q.removeClass("mvp-subtitle-bottom");H.hide();Eb.hide().removeClass("mvp-menu-bottom");Fb.hide().removeClass("mvp-menu-bottom");Gb.hide().removeClass("mvp-menu-bottom");fa.css("display","none");ib=!1;vc.hide();Sc.empty();Ob.hide();Ta=!1;wc.hide();Ua=!1;Ga.hide();h=L=f=pa=null;Wa=Aa=W=!1}function Jd(){ba.on("transitionend",function(){d(this).remove();ba=null}).remove("mvp-visible").addClass("mvp-hidden")}
function xc(){f&&Za();p.find(".mvp-playlist-item").remove();A=0;B.reSetCounter();Dc=!1;yc="";Va=null;ua=Ra=!1}function $b(){q&&0!=A&&B.advanceHandler(1,!0)}function tc(){q&&0!=A&&B.advanceHandler(-1,!0)}function Gc(){X.hide();Ga.hide();ob.find(".mvp-btn-play").hide();ob.find(".mvp-btn-pause").show();if(!Aa){ce&&(ea=!0);v();if(Sa&&"video_360"==L){$a.hide();gc.show();Mb.show();Nb=!0;var a=qa.width(),b=qa.height();ab.setSize(a,b);Ha.aspect=a/b;Ha.updateProjectionMatrix();kb=!0}ja&&cancelAnimationFrame(ja);
ja=requestAnimationFrame(Jc);d(u).trigger("mediaStart",{instance:u,instanceName:P,counter:B.getCounter()});Aa=!0;hb.show();sa=Rb.width();Fa()}if(1<mvp_mediaArr.length)for(b=mvp_mediaArr.length,a=0;a<b;a++)u!=mvp_mediaArr[a].inst&&mvp_mediaArr[a].inst.pauseMedia();O&&(J||(J=setTimeout(function(){clearTimeout(this);J=null;gb()},5E3)));d(u).trigger("mediaPlay",{instance:u,instanceName:P,counter:B.getCounter()});W=!0}function Hc(){ob.find(".mvp-btn-play").show();ob.find(".mvp-btn-pause").hide();Aa?Ga.show():
"audio"!=f&&"video"!=f||Ga.show();d(u).trigger("mediaPause",{instance:u,instanceName:P,counter:B.getCounter()});W=!1}function Bd(){Ka.render(Kc,bb);ja=requestAnimationFrame(Bd)}function Jc(){if(Sa&&"video_360"==L){if(!kb)return;ca.readyState===ca.HAVE_ENOUGH_DATA&&(zb.needsUpdate=!0);ab.render(hc,Ha)}if("audio"==f){var a=n.currentTime,b=n.duration;if("undefined"!==typeof n.buffered&&0!=n.buffered.length){try{var c=n.buffered.end(n.buffered.length-1)}catch(Td){}isNaN(c)||(c/=Math.floor(n.duration),
Tc.width(c*sa))}}else if("video"==f){if(a=l.currentTime,b=l.duration,"undefined"!==typeof l.buffered&&0!=l.buffered.length){try{c=l.buffered.end(l.buffered.length-1)}catch(Td){}isNaN(c)||(c/=Math.floor(l.duration),Tc.width(c*sa))}}else"youtube"==f&&(a=y.getCurrentTime(),b=y.getDuration(),c=y.getVideoLoadedFraction(),Tc.width(c*sa));if(MVPUtils.isNumber(a)&&MVPUtils.isNumber(b)){de.width(a/b*sa);if(h.end&&a>=h.end){ja&&cancelAnimationFrame(ja);nb();return}Qc.html(MVPUtils.formatCurrentTime(a));Rc.html(MVPUtils.formatDuration(b));
if(fb&&za.length)for(c=za.length,b=0;b<c;b++){var e=za[b];var k=e.start;var m=e.end;e=e.text;a>=k&&a<=m?Q||(Q=d('<p class="mvp-subtitle">'+e+"</p>"),Db||Q.addClass("mvp-subtitle-bottom"),Q.start=k,Q.end=m,Pb.append(Q)):Q&&(a<Q.start||a>Q.end)&&(Q.remove(),Q=null)}}ja=requestAnimationFrame(Jc)}function nb(){d(u).trigger("mediaEnd",{instance:u,instanceName:P,counter:B.getCounter()});var a=h.start||0;"next"==Uc?$b():"loop"==Uc?"audio"==f?n&&(n.currentTime=a,n.play()):"video"==f?l&&(l.currentTime=a,l.play()):
"youtube"==f?y&&(y.seekTo(a),y.playVideo()):"vimeo"==f&&z&&(z.pause(),z.setCurrentTime(a),z.play()):"rewind"==Uc&&("audio"==f?n&&(n.currentTime=a,n.pause()):"video"==f?l&&(l.currentTime=a,l.pause()):"youtube"==f?y&&(y.seekTo(a),y.pauseVideo()):"vimeo"==f&&z&&(z.pause(),z.setCurrentTime(a)))}function Jb(){if("right_bottom"==Vc)if(700<e.width())if(e.removeClass("mvp-wrapper-bottom"),M.removeClass("mvp-player-holder-bottom"),K.removeClass("mvp-playlist-holder-bottom"),e.css("height","auto"),M.css("height",
"100%"),"horizontal"==ha){var a=T?e.height()-K.height():e.height();M.height(a)}else a=T?e.width()-K.width():e.width(),M.width(a);else{e.addClass("mvp-wrapper-bottom");M.addClass("mvp-player-holder-bottom");K.addClass("mvp-playlist-holder-bottom");var b=e.width(),d=b/(16/9);M.height(d);T?e.height(d+K.height()):e.height(d);"fullscreen"==cb&&(T?M.height(e.height()-K.height()):M.height(e.height()))}else"right"==Vc?(a=T?e.width()-K.width():e.width(),M.width(a)):"bottom"==Vc&&("100%"==ee?(a=T?e.height()-
K.height():e.height(),M.height(a)):(b=e.width(),d=b/(16/9),M.height(d),T?e.height(d+K.height()):e.height(d),"fullscreen"==cb&&(T?M.height(e.height()-K.height()):M.height(e.height()))));if("buttons"==ta){"horizontal"==ha?(b=V.width(),a=p.width(),d="translateX"):(b=V.height(),a=p.height(),d="translateY");if(a<b-0){Xa=!1;la.hide();ia.hide();var c=parseInt(b/2-a/2,10)}else Xa=!0,ma?c=ma:(c=p[0].style.transform.replace(/[^\d.]/g,""),c=parseInt(c)||0),0<c?(c=0,ia.show()):c<b-a&&(c=b-a,la.show());ma=c;p.css({"-webkit-transform":""+
d+"("+c+"px)","-ms-transform":""+d+"("+c+"px)",transform:""+d+"("+c+"px)"})}else"hover"==ta&&("horizontal"==ha?(b=V.width(),a=p.width(),a<b-0?(Xa=!1,c=parseInt(b/2-a/2,10)):(Xa=!0,c=parseInt(p.css("left"),10),0<c?c=0:c<b-a&&(c=b-a)),p.css("left",c+"px")):(d=V.height(),a=p.height(),a<d-0?(Xa=!1,c=parseInt(d/2-a/2,10)):(Xa=!0,c=parseInt(p.css("top"),10),0<c?c=0:c<d-a&&(c=d-a)),p.css("top",c+"px")));sa=Rb.width();f&&("audio"==f?ba&&MVPAspectRatio.resizeMedia("image",va,M,ba):"video"==f?Sa&&"video_360"==
L?kb&&(b=qa.width(),d=qa.height(),ab.setSize(b,d),Ha.aspect=b/d,Ha.updateProjectionMatrix()):ba?MVPAspectRatio.resizeMedia("image",va,M,ba):ca&&MVPAspectRatio.resizeMedia("video",va,M,ca):"image"==f?"image_360"==L?ec&&(b=qa.width(),d=qa.height(),Ka.setSize(b,d),bb.aspect=b/d,bb.updateProjectionMatrix()):mb&&MVPAspectRatio.resizeMedia("image",va,M,mb):"youtube"==f&&h.width&&h.height&&MVPAspectRatio.resizeMedia("youtube",va,Ab,Ma))}function dd(a){if(!q)return!1;if("undefined"!==typeof a){if(T&&1==a||
!T&&0==a)return!1;T=!a}T?K.hide():K.show();T=!T;Jb()}function ac(a){var c={};if("html"==(a.type?"data":"html")){c.origclasses=a.attr("class");c.type=a.attr("data-type");void 0!=a.attr("data-noapi")&&(c.noapi=!0);void 0==a.attr("data-deeplink")||MVPUtils.isEmpty(a.attr("data-deeplink"))||(c.deeplink=a.attr("data-deeplink"));"image"==c.type||"image_360"==c.type||"audio"==c.type||"video"==c.type||"video_360"==c.type?c.path=a.data("path"):void 0==a.attr("data-path")||MVPUtils.isEmpty(a.attr("data-path"))||
(c.path=a.attr("data-path"));void 0==a.attr("data-thumb")||MVPUtils.isEmpty(a.attr("data-thumb"))||(c.thumb=a.attr("data-thumb"));void 0==a.attr("data-title")||MVPUtils.isEmpty(a.attr("data-title"))||(c.title=a.attr("data-title"));void 0==a.attr("data-description")||MVPUtils.isEmpty(a.attr("data-description"))||(c.description=a.attr("data-description"));void 0==a.attr("data-quality")||MVPUtils.isEmpty(a.attr("data-quality"))||(c.quality=a.attr("data-quality"));void 0==a.attr("data-download")||MVPUtils.isEmpty(a.attr("data-download"))||
(c.download=a.attr("data-download"));void 0==a.attr("data-poster")||MVPUtils.isEmpty(a.attr("data-poster"))||(c.poster=a.attr("data-poster"));void 0==a.attr("data-start")||MVPUtils.isEmpty(a.attr("data-start"))||(c.start=Number(a.attr("data-start")));void 0==a.attr("data-end")||MVPUtils.isEmpty(a.attr("data-end"))||(c.end=Number(a.attr("data-end")));void 0==a.attr("data-duration")||MVPUtils.isEmpty(a.attr("data-duration"))||(c.duration=a.attr("data-duration"));void 0!=a.attr("data-playback-rate")&&
!MVPUtils.isEmpty(a.attr("data-playback-rate"))&&MVPUtils.isNumber(a.attr("data-playback-rate"))&&(c.playbackRate=Number(a.attr("data-playback-rate")));void 0==a.attr("data-aspect-ratio")||MVPUtils.isEmpty(a.attr("data-aspect-ratio"))||(c.aspectRatio=a.attr("data-aspect-ratio"));void 0!=a.attr("data-id3")&&(c.id3=!0);void 0==a.attr("data-share")||MVPUtils.isEmpty(a.attr("data-share"))||(c.share=a.attr("data-share"));void 0==a.attr("data-limit")||MVPUtils.isEmpty(a.attr("data-limit"))||(c.limit=Number(a.attr("data-limit")));
void 0!=a.attr("data-load-more")&&"1"==a.attr("data-load-more")&&(b.loadMoreOnTotalScroll=!0);void 0==a.attr("data-width")||MVPUtils.isEmpty(a.attr("data-width"))||void 0==a.attr("data-height")||MVPUtils.isEmpty(a.attr("data-height"))||(c.width=parseInt(a.attr("data-width"),10),c.height=parseInt(a.attr("data-height"),10));void 0==a.attr("data-user")||MVPUtils.isEmpty(a.attr("data-user"))||(c.user=a.attr("data-user"));void 0==a.attr("data-sort")||MVPUtils.isEmpty(a.attr("data-sort"))||(c.sort=a.attr("data-sort"),
void 0==a.attr("data-sort-direction")||MVPUtils.isEmpty(a.attr("data-sort-direction"))||(c.sortDirection=a.attr("data-sort-direction")));if(a.children(".mvp-subtitles").length){var e=a.children(".mvp-subtitles");e.children("div").length&&(c.subtitles=[],e.children("div").each(function(){var a=d(this),b={label:a.attr("data-label"),src:a.attr("data-src")};void 0!=a.attr("data-default")&&(b["default"]=!0);c.subtitles.push(b)}))}a.is(":empty")||(c.content=a.html())}else c.origclasses=a.origclasses,c.type=
a.type,a.noapi&&(c.noapi=a.noapi),a.deeplink&&(c.deeplink=a.deeplink),"image"==c.type||"image_360"==c.type||"audio"==c.type||"video"==c.type||"video_360"==c.type?c.path=a.path:a.path&&(c.path=a.path),a.thumb&&(c.thumb=a.thumb),a.title&&(c.title=a.title),a.description&&(c.description=a.description),a.quality&&(c.quality=a.quality),a.download&&(c.download=a.download),a.poster&&(c.poster=a.poster),a.start&&(c.start=a.start),a.end&&(c.end=a.end),a.duration&&(c.duration=a.duration),a.playbackRate&&(c.playbackRate=
a.playbackRate),void 0!=a.aspectRatio&&(c.aspectRatio=a.aspectRatio),a.id3&&(c.id3=!0),a.share&&(c.share=a.share),a.limit&&(c.limit=a.limit),a.loadMore&&(b.loadMoreOnTotalScroll=!0),a.width&&a.height&&(c.width=a.width,c.height=a.height),a.user&&(c.user=a.user),a.sort&&(c.sort=a.sort,a.sortDirection&&(c.sortDirection=a.sortDirection)),a.subtitles&&(c.subtitles=a.subtitles),a.content&&(c.content=a.content);return c}var e=d(this),qa=e.find(".mvp-media-holder").show();e.find(".mvp-playlist-list");var K=
e.find(".mvp-playlist-holder"),V=e.find(".mvp-playlist-inner"),p=e.find(".mvp-playlist-content"),Kd=e.find(".mvp-playlist-filter-msg"),Pb=e.find(".mvp-elem-holder"),M=e.find(".mvp-player-holder").show(),$a=e.find(".mvp-video-holder"),Fc=e.find(".mvp-audio-holder"),Ec=e.find(".mvp-image-holder"),Ab=e.find(".mvp-youtube-holder"),Pc=e.find(".mvp-vimeo-holder"),Gd=e.find(".mvp-iframe-holder"),hb=e.find(".mvp-player-interface"),ob=e.find(".mvp-playback-toggle"),Qc=e.find(".mvp-media-time-current"),Hd=
e.find(".mvp-media-time-separator"),Rc=e.find(".mvp-media-time-total"),Ia=e.find(".mvp-seekbar"),Rb=e.find(".mvp-progress-bg"),Tc=e.find(".mvp-load-level"),de=e.find(".mvp-progress-level"),kc=e.find(".mvp-volume-wrapper"),sb=e.find(".mvp-volume-toggle"),fa=e.find(".mvp-volume-seekbar"),qb=e.find(".mvp-volume-bg"),Sd=e.find(".mvp-volume-level"),vc=e.find(".mvp-info-holder"),Ob=e.find(".mvp-info-toggle"),Sc=e.find(".mvp-info-data");e.find(".mvp-embed");var fe=e.find(".mvp-playlist-toggle"),X=e.find(".mvp-player-loader"),
Ga=e.find(".mvp-big-play"),Wc=e.find(".mvp-loop-toggle"),Xc=e.find(".mvp-shuffle-toggle"),Id=e.find(".mvp-download-toggle"),ge=e.find(".mvp-share-toggle"),wc=e.find(".mvp-share-holder"),he=e.find(".mvp-seek-backward"),ie=e.find(".mvp-seek-forward"),la=e.find(".mvp-nav-backward"),ia=e.find(".mvp-nav-forward"),Mb=e.find(".mvp-vr-info"),wa=e.find(".mvp-lightbox-wrap"),sd=e.find(".mvp-lightbox"),je=e.find(".mvp-lightbox-bg"),ke=e.find(".mvp-lightbox-close"),O=MVPUtils.isMobile(),kd=b.sourcePath||"",P=
b.instanceName||"";kd=b.sourcePath;var Uc=b.mediaEndAction,le=b.useKeyboardNavigationForPlayback,F=b.volume,ea=b.autoPlay,ce=ea,T=b.playlistOpened,ub=b.usePlaylist,ee=b.wrapperLayout,$d=b.playerType,ta=b.navigationType,ha=b.navigationDirection,Vc=b.playlistPosition,va=b.aspectRatio,td=b.hideQualityMenuOnSingleQuality,bc=b.defaultMenuQuality||"default",od=O?!1:b.sortableTracks,be=b.focusVideoOnActive,vd=b.preload||"auto";MVPUtils.isIOS();var yd=MVPUtils.isAndroid(),Ld=MVPUtils.hasFullscreen(),ae=MVPUtils.hasDownloadSupport(),
me=MVPUtils.volumeCanBeSet(),ne=MVPUtils.supportsWebGL(),rd=MVPUtils.canPlayMp4();yd=MVPUtils.isAndroid();var qd=MVPUtils.canPlayMp3(),pd=MVPUtils.canPlayWav(),oe=MVPUtils.isChrome(),q=!1,G=!0,ua,Ya=window.Hls&&Hls.isSupported(),u=this;d("body");var Oa=d(window),ka=d(document),lc=d("html"),Yc,Aa,ja,h,fc,yc,N,A,jb,Ac,ud,lb,n,ba,Wa,l,ca,Ic,mb,Ba,Ma,y,Dd,Cd,Nc,ic,Ca,z,Ed,Fd,Oc,Sa=!0,Nb,wd,gc,ab,zb,Lb,Ha,hc,kb,La,zd,ec,xb,Lc,Mc,bb,Kc,Ka,Ad,yb,Xd=b.thumbScrollValue||50,Xa=!0,Ra,ma,Kb,pa,f,L,aa,W,uc,ib,
Ta,Ua,J,hd=0,Db=!0,Va,Dc,Ib,R=[],na=[],wb,oa,vb,cc,dc,Cc;"undefined"===typeof window.mvp_mediaArr&&(window.mvp_mediaArr=[]);mvp_mediaArr.push({inst:u,id:P});ke.on("click",function(){wa.one("transitionend",function(){wa.css("display","none")}).css("opacity",0);f&&Za();N&&Cb()});if(b.clickOnBackgroundClosesLightbox)je.on("click",function(){wa.one("transitionend",function(){wa.css("display","none")}).css("opacity",0);f&&Za();N&&Cb()});O&&(b.forceMobileAutoplay?(ea=!0,F=0):ea=!1);Ld||(va=1);ub||(T=!1,
K.css({width:0,height:0}).hide());T&&K.show();ne||(Sa=!1,Mb.remove(),oe&&alert("Turn Hardware Acceleration On Within Chrome Browser to enable 360 video and images!"));var mc=d('<div class="mvp-playlist-item"></div>').prependTo(e);var Z="horizontal"==ha?mc.outerWidth(!0):mc.outerHeight(!0);mc.remove();mc=null;e.find("#mvp-load-more-toggle").on("click",function(){b.loadMoreOnTotalScroll&&!G&&(G=!0,X.show(),ua=!0,R=[],"youtube"==f?Ba.resumeLoad():"vimeo"==f&&Ca.resumeLoad())});if("ontouchstart"in window){var md=
!0;var nc="touchstart.ap mousedown.ap";var Ea="touchmove.ap mousemove.ap";var pb="touchend.ap mouseup.ap"}else window.PointerEvent?(nc="pointerdown.ap",Ea="pointermove.ap",pb="pointerup.ap"):(nc="mousedown.ap",Ea="mousemove.ap",pb="mouseup.ap");Fc.on("click",function(){O?Db?Fa():n&&(n.paused?n.play():n.pause()):n&&(n.paused?n.play():n.pause())});$a.on("click",function(){O?Db?Fa():l&&(l.paused?l.play():l.pause()):l&&(l.paused?l.play():l.pause())});var Md=e.find(".mvp-playlist-filter"),Nd=Md.val();
Md.on("focus",function(a){d(this).val()==Nd&&d(this).val("")}).on("blur",function(){MVPUtils.isEmpty(d(this).val())&&d(this).val(Nd)}).on("keyup.apfilter",function(){if(0==A)return!1;var a=d(this).val(),b,c=0;for(b=0;b<A;b++){var e=p.children(".mvp-playlist-item").eq(b).find(".mvp-playlist-title").html();-1<e.indexOf(a)?p.children(".mvp-playlist-item").eq(b).show():(p.children(".mvp-playlist-item").eq(b).hide(),c++)}c==A?Kd.show():Kd.hide()});var cb="normal",Zc;ka.on("fullscreenchange mozfullscreenchange MSFullscreenChange webkitfullscreenchange",
function(a){Zc==P&&(J&&clearTimeout(J),"fullscreen"==cb?(cb="normal",lc.removeClass("mvp-fs-overflow"),e.removeClass("mvp-fs"),xa.find(".mvp-btn-fullscreen").show(),xa.find(".mvp-btn-normal").hide(),O||ka.off("mousemove",Hb),Fa(),document.body.style.cursor="default",Zc=null,d(u).trigger("fullscreenExit",{instance:u,instanceName:P})):(cb="fullscreen",lc.addClass("mvp-fs-overflow"),e.addClass("mvp-fs"),xa.find(".mvp-btn-fullscreen").hide(),xa.find(".mvp-btn-normal").show(),b.hidePlaylistOnFullscreenEnter&&
T&&(K.hide(),T=!1),O?J=setTimeout(function(){clearTimeout(this);J=null;gb()},5E3):(ka.on("mousemove",Hb),J=setTimeout(function(){clearTimeout(this);J=null;Hb()},5E3)),d(u).trigger("fullscreenEnter",{instance:u,instanceName:P})))});var xa=e.find(".mvp-fullscreen-toggle").on("click",function(a){Zc=P;a=e[0];Ld?a.requestFullscreen?document.fullscreenElement?document.exitFullscreen():a.requestFullscreen():a.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():a.webkitRequestFullScreen():
a.msRequestFullscreen?document.msIsFullscreen||document.msFullscreenElement?document.msExitFullscreen():a.msRequestFullscreen():a.mozRequestFullScreen&&(document.fullscreenElement||document.mozFullScreenElement?document.mozCancelFullScreen():a.mozRequestFullScreen()):("fullscreen"==cb?(cb="normal",lc.removeClass("mvp-fs-overflow"),e.removeClass("mvp-fs"),document.body.style.cursor="default",xa.find(".mvp-btn-fullscreen").show(),xa.find(".mvp-btn-normal").hide(),d(u).trigger("fullscreenExit",{instance:u,
instanceName:P})):(cb="fullscreen",lc.addClass("mvp-fs-overflow"),e.addClass("mvp-fs"),xa.find(".mvp-btn-fullscreen").hide(),xa.find(".mvp-btn-normal").show(),b.hidePlaylistOnFullscreenEnter&&T&&(K.hide(),T=!1),O?J=setTimeout(function(){clearTimeout(this);J=null;gb()},5E3):(ka.on("mousemove",Hb),J=setTimeout(function(){clearTimeout(this);J=null;Hb()},5E3)),d(u).trigger("fullscreenEnter",{instance:u,instanceName:P})),Jb())});xa.find(".mvp-btn-normal").hide();xa.find(".mvp-btn-fullscreen").show();if(b.disableRightClick)e.on("contextmenu",
function(){return!1});var H=e.find(".mvp-tooltip");if(!O)e.find("[data-tooltip]").on("mouseenter",function(a){a=d(this);var b=e[0].getBoundingClientRect(),c=a[0].getBoundingClientRect();H.find("p").text(a.attr("data-tooltip"));if(void 0!=a.attr("data-tooltip-position")){if("left"==a.attr("data-tooltip-position"))var f=parseInt(c.top-b.top-H.outerHeight()/2+a.outerHeight()/2),h=parseInt(c.left-b.left-H.outerWidth()-3)}else f=parseInt(c.top-b.top-H.outerHeight()),h=parseInt(c.left-b.left-H.outerWidth()/
2+a.outerWidth()/2);0>h?h=0:h+H.outerWidth()>e.width()&&(h=e.width()-H.outerWidth());0>f+b.top&&(f=parseInt(c.top-b.top+H.outerHeight()+15));H.css({left:h+"px",top:f+"px"}).show()}).on("mouseleave",function(a){H.hide()});var Qb,sa,Rd=Ia.hasClass("mvp-position-top")?"top":"bottom";Ia.on(nc,function(a){r(a);return!1});if(!O){var oc=function(){Aa&&(Ia.off(Ea,C).off("mouseout",oc),ka.off("mouseout",oc),H.hide())};Ia.on("mouseover",function(){Aa&&(Ia.on(Ea,C).on("mouseout",oc),ka.on("mouseout",oc))})}var db=
fa.hasClass("mvp-horizontal"),qc=.5;db?fa.width():fa.height();var rb=db?qb.width():qb.height(),Sb;0>F?F=0:1<F&&(F=1);0!=F&&(qc=F);if(!me)fa.remove(),sb.on("click",function(a){c()});else if(!O)sb.on("click",function(a){c()});kc.on("mouseenter",function(){fa.css("display","block")}).on("mouseleave",function(){fa.css("display","none")});fa.on(nc,function(a){w(a);return!1});if(!O){var pc=function(){fa.off(Ea,k).off("mouseout",pc);ka.off("mouseout",pc);H.hide()};fa.on("mouseover",function(){fa.on(Ea,k).on("mouseout",
pc);ka.on("mouseout",pc)})}MVPUtils.isEmpty(b.facebookAppId)?console.log("facebookAppId has not been set in settings!"):"file:"!=window.location.protocol&&E(b.facebookAppId);var jc=e.find(".mvp-playback-rate-toggle"),Gb=e.find(".mvp-playback-rate-holder"),sc=e.find(".mvp-playback-rate-menu"),rc;jc.on("mouseenter",function(){Gb.show();sc.height()>jc.offset().top-Oa.scrollTop()&&(Gb.addClass("mvp-menu-bottom"),e.addClass("mvp-holder-visible"))}).on("mouseleave",function(){Gb.hide().removeClass("mvp-menu-bottom");
e.removeClass("mvp-holder-visible")});sc.find(".mvp-menu-item").each(function(){d(this).attr("data-label",d(this).find("a").text()).on("click",x)});var Ub=e.find(".mvp-quality-toggle").hide(),Fb=e.find(".mvp-quality-holder"),Tb=e.find(".mvp-quality-menu"),Qa;Ub.on("mouseenter",function(){Fb.show();Tb.height()>Ub.offset().top-Oa.scrollTop()&&(Fb.addClass("mvp-menu-bottom"),e.addClass("mvp-holder-visible"))}).on("mouseleave",function(){Fb.hide().removeClass("mvp-menu-bottom");e.removeClass("mvp-holder-visible")});
var Wb=e.find(".mvp-subtitle-toggle").hide(),Eb=e.find(".mvp-subtitle-holder"),eb=e.find(".mvp-subtitle-menu"),Y,fb,Vb="Off",Xb=[],za=[],Q;Wb.on("mouseenter",function(){Eb.show();eb.height()>Wb.offset().top-Oa.scrollTop()&&(Eb.addClass("mvp-menu-bottom"),e.addClass("mvp-holder-visible"))}).on("mouseleave",function(){Eb.hide().removeClass("mvp-menu-bottom");e.removeClass("mvp-holder-visible")});this.setSubtitle=function(a){if(!q||!f)return!1;if(a==Vb||""==a)fb=!1,Pb.empty(),Q=null,Y&&Y.removeClass("mvp-menu-active"),
Y=eb.find(".mvp-menu-item[data-label='"+Vb+"']").addClass("mvp-menu-active");else if(Xb[a])fb=!1,Pb.empty(),Q=null,Y&&Y.removeClass("mvp-menu-active"),Y=eb.find(".mvp-menu-item[data-label='"+a+"']").addClass("mvp-menu-active"),za=Xb[a],fb=!0;else{var b,c=h.subtitles.length;for(b=0;b<c;b++){var d=h.subtitles[b];if(d.label==a){fb=!1;Pb.empty();Q=null;Y&&Y.removeClass("mvp-menu-active");Y=eb.find(".mvp-menu-item[data-label='"+a+"']").addClass("mvp-menu-active");ad(d);break}}}};le&&ka.keyup(function(a){a.stopImmediatePropagation();
a.preventDefault();if(!q)return!1;var b=a.keyCode;a=d(a.target);if(37==b)u.seekBackward();else if(39==b)u.seekForward();else if(33==b)tc();else if(34==b)$b();else if(32==b){if(a.hasClass("mvp-playlist-filter"))return!1;u.togglePlayback()}else if(77==b){if(a.hasClass("mvp-playlist-filter"))return!1;c()}});var Od=[ob,fe,xa,Ga,kc,Ob,ge,he,ie,Wc,Xc,e.find(".mvp-info-close"),e.find(".mvp-share-close"),e.find(".mvp-next-toggle"),e.find(".mvp-prev-toggle"),e.find(".mvp-share-item")],pe=Od.length,Pa;for(Pa=
0;Pa<pe;Pa++)d(Od[Pa]).css("cursor","pointer").on("click",Qd);var qe=e.find(".mvp-link-code").text(window.location.href);e.find(".mvp-link-copy").on("click",function(){MVPUtils.selectText(qe[0]);try{document.execCommand("copy")}catch(a){alert("Please press Ctrl/Cmd+C to copy code!")}});if(b.embedWidth&&!MVPUtils.isEmpty(b.embedWidth)&&b.embedHeight&&!MVPUtils.isEmpty(b.embedHeight)){var re=b.embedSrc||window.location.href,se=e.find(".mvp-embed-code").text('<iframe width="'+b.embedWidth+'" height="'+
b.embedHeight+'" src="'+re+'" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');e.find(".mvp-embed-copy").on("click",function(){MVPUtils.selectText(se[0]);try{document.execCommand("copy")}catch(a){alert("Please press Ctrl/Cmd+C to copy code!")}})}var B=new MVPPlaylistManager(b);d(B).on("MVPPlaylistManager.COUNTER_READY",function(a,b){Ud();tb()}).on("MVPPlaylistManager.RANDOM_CHANGE",function(a,b){b?Xc.find(".mvp-btn").addClass("mvp-contr-btn-hover"):
Xc.find(".mvp-btn").removeClass("mvp-contr-btn-hover")}).on("MVPPlaylistManager.LOOP_CHANGE",function(a,b){b?Wc.find(".mvp-btn").addClass("mvp-contr-btn-hover"):Wc.find(".mvp-btn").removeClass("mvp-contr-btn-hover")});if(Ya){var Da=new Hls;Da.on(Hls.Events.MEDIA_ATTACHED,function(){Da.loadSource(aa)});Da.on(Hls.Events.ERROR,function(a,b){if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");Da.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");
Da.recoverMediaError();break;default:Da.destroy()}})}Oa.on("resize",function(){if(!q)return!1;Yc&&clearTimeout(Yc);Yc=setTimeout(Jb,100)});this.playMedia=function(){if(!q||!f||W)return!1;"audio"==f?n&&n.play():"video"==f?ba?(Jd(),tb()):l&&l.play():"youtube"==f?y.playVideo():"vimeo"==f&&z.play();W=!0};this.pauseMedia=function(){if(!q||!f||!W)return!1;"audio"==f?n&&n.pause():"video"==f?l&&l.pause():"youtube"==f?y.pauseVideo():"vimeo"==f&&z.pause();W=!1};this.togglePlayback=function(){if(!q||!f)return!1;
if("audio"==f)n&&(n.paused?n.play():n.pause());else if("video"==f)ba&&!Aa?(Jd(),tb()):l&&(l.paused?l.play():l.pause());else if("youtube"==f){var a=y.getPlayerState();1==a?y.pauseVideo():2==a?y.playVideo():(-1==a||5==a||0==a)&&y.playVideo()}else"vimeo"==f&&z.getPaused().then(function(a){a?z.play():z.pause()})};this.nextMedia=function(){if(!q)return!1;$b()};this.previousMedia=function(){if(!q)return!1;tc()};this.setVolume=function(a){if(!q)return!1;0>a?a=0:1<a&&(a=1);v(a)};this.toggleMute=function(){if(!q)return!1;
c()};this.seek=function(a){if(!q||!f)return!1;"audio"==f?n.currentTime=a:"video"==f?l.currentTime=a:"youtube"==f?y.seekTo(a):"vimeo"==f&&z.setCurrentTime(a)};this.seekBackward=function(a){if(!q||!f)return!1;if("audio"==f){if(n)try{n.currentTime=Math.max(n.currentTime-(a||10),0)}catch(I){console.log(I)}}else if("video"==f){if(l)try{l.currentTime=Math.max(l.currentTime-(a||10),0)}catch(I){console.log(I)}}else if("youtube"==f){var b=Math.max(y.getCurrentTime()-(a||10),0);y.seekTo(b)}else"vimeo"==f&&
z.getCurrentTime().then(function(b){z.setCurrentTime(Math.max(b-(a||10),0))})};this.seekForward=function(a){if(!q||!f)return!1;if("audio"==f){if(n)try{n.currentTime=Math.min(n.currentTime+(a||10),n.duration)}catch(I){console.log(I)}}else if("video"==f){if(l)try{l.currentTime=Math.min(l.currentTime+(a||10),l.duration)}catch(I){console.log(I)}}else if("youtube"==f){var b=Math.min(y.getCurrentTime()+(a||10),y.getDuration());y.seekTo(b)}else"vimeo"==f&&z.getCurrentTime().then(function(b){z.getDuration().then(function(c){z.setCurrentTime(Math.min(b+
(a||10),c))})})};this.getCurrentTime=function(){if(!q||!f)return!1;if("audio"==f)return n.currentTime;if("video"==f)return l.currentTime;if("youtube"==f)return y.getCurrentTime()};this.getDuration=function(){if(!q||!f)return!1;if("audio"==f)return n.duration;if("video"==f)return l.duration;if("youtube"==f)return y.getDuration()};this.getLoadProgress=function(){if(!q||!f)return!1;var a;if("audio"==f){if("undefined"!==typeof n.buffered&&0!=n.buffered.length){try{var b=n.buffered.end(n.buffered.length-
1)}catch(I){}isNaN(b)||(a=b/Math.floor(n.duration))}}else if("video"==f){if("undefined"!==typeof l.buffered&&0!=l.buffered.length){try{b=l.buffered.end(l.buffered.length-1)}catch(I){}isNaN(b)||(a=b/Math.floor(l.duration))}}else"youtube"==f&&(a=y.getVideoLoadedFraction());return a};this.togglePlaylist=function(a){if(!q)return!1;dd(a)};this.toggleRandom=function(a){if(!q||"undefined"===typeof B)return!1;B.setRandom(a)};this.toggleLoop=function(a){if(!q||"undefined"===typeof B)return!1;B.setLooping(a)};
this.setPlaybackRate=function(a){if(!q||!f)return!1;h.playbackRate=a;"audio"==f?n&&(n.playbackRate=a):"video"==f?l&&(l.playbackRate=a):"youtube"==f?y.setPlaybackRate(a):"vimeo"==f&&z.setPlaybackRate(a).then(function(a){})["catch"](function(a){console.log(a.name)})};this.setPlaybackQuality=function(a){if(!q||!f)return!1;"image"==f||"audio"==f||"video"==f?"hls"!=L&&(h.quality=a,ra(a),tb(!0)):"youtube"==f&&y.setPlaybackQuality(a)};this.toggleInfo=function(a){if(!q||!f)return!1;Yb(a)};this.toggleShare=
function(a){if(!q||!f)return!1;Zb(a)};this.toggleFullscreen=function(){if(!q)return!1;xa.click()};this.openLightbox=function(){if(!q)return!1;f&&Za();wa.css("display","block");setTimeout(function(){clearTimeout(this);wa.css("opacity",1)},50)};this.closeLightbox=function(){if(!q)return!1;wa.one("transitionend",function(){wa.css("display","none")}).css("opacity",0);f&&Za()};this.destroyMedia=function(){if(!q)return!1;q&&f&&(N&&Cb(),Za(),B.reSetCounter())};this.destroyPlaylist=function(){if(!q)return!1;
xc()};this.loadPlaylist=function(a){if(!q||G)return!1;if("string"===typeof a){if(yc==a)return!1;id(a)}else return alert("Invalid value loadPlaylist!"),!1};this.setAutoPlay=function(a){ea=a};this.loadMedia=function(a){if(!q||G||!Va)return!1;if("number"===typeof a)0>a?a=0:a>A-1&&(a=A-1),B.processPlaylistRequest(a);else return alert("Invalid value loadMedia!"),!1};this.inputMedia=function(a){if(!q||G)return!1;if("undefined"===typeof a)return alert("inputMedia method requires data parameter. inputMedia failed."),
!1;N&&Cb();B.reSetCounter();fc=a;tb()};this.addTrack=function(a,b,c,e){if(!q||G)return!1;if("undefined"===typeof a)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof b)return alert("addTrack method requires track parameter. AddTrack failed."),!1;cc=!1;"undefined"!==typeof c&&(cc=c);c=1;var f=!1;if("string"!==typeof b&&"[object Object]"!==Object.prototype.toString.call(b))if("[object Array]"===Object.prototype.toString.call(b))c=b.length,f=!0;else return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),
!1;oa=e;wb=!1;vb=!0;if(Va)if("undefined"!==typeof oa){if(0>oa||oa>A)return alert('Invalid position to insert track to. Position number "'+e+'" doesnt exist. AddTrack failed.'),!1;oa==A&&(wb=!0)}else wb=!0,oa=A;else{if("undefined"!==typeof oa){if(0!=oa)return alert('Invalid position to insert track to. Position number "'+e+'" doesnt exist. AddTrack failed.'),!1}else oa=0;wb=!0}G=!0;X.show();Ib=-1;R=[];na=[];for(e=0;e<c;e++){var g=f?b[e]:b;g="html"==a?d(d.parseHTML(g)):g;na.push(g)}A=na.length;dc=!1;
Va||(dc=!0);Va=p;da()};this.removeTrack=function(a){if(!q||G)return!1;if(0!=A){if("undefined"===typeof a)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"===typeof a){var b=!1;p.find(".mvp-playlist-item").each(function(){if(d(this).find(".mvp-playlist-title").html()==a)return c=d(this),a=c.index(),b=!0,!1});if(!b)return alert('Track with title "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"===typeof a){a=parseInt(a,10);if(0>a||a>A-1)return alert('Invalid id number. Track number  "'+
a+'" doesnt exist. RemoveTrack failed.'),!1;var c=p.find(".mvp-playlist-item").eq(a)}else return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;c.remove();A=p.children(".mvp-playlist-item").length;if(0<A){var e=B.getCounter();a==e?(Za(),B.setPlaylistItems(A)):(B.setPlaylistItems(A,!1),a<e&&B.reSetCounter(B.getCounter()-1))}else xc()}};this.setLoadMore=function(a){b.loadMoreOnTotalScroll=a};this.loadMore=function(a){G||(G=!0,X.show(),ua=!0,
R=[],a=f||a,"youtube"==a?Ba.resumeLoad():"vimeo"==a&&Ca.resumeLoad())};this.getMediaPlaying=function(){return q?W:!1};this.getPlaylistLength=function(){return q?A:!1};this.getSetupDone=function(){return q};this.getSettings=function(){return b};this.getActiveItemId=function(){return q?"undefined"!==typeof B?B.getCounter():null:!1};b.activePlaylist&&!MVPUtils.isEmpty(b.activePlaylist)?id(b.activePlaylist):Yd();return this}})(jQuery);